{% extends 'base.html' %}
{% block title %}Perfil de Cliente{% endblock %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />

<div style="overflow-x:auto; width:100%; padding: 40px; padding-top: 0px;">
    <h2 style="font-size:40px; margin-bottom:30px; justify-self: center;">Compras realizadas</h2>
    <table style="width:100%; border-collapse:collapse; background-color:#e9e9e9; color:#000; border-radius:8px; overflow:hidden; font-size:18px;">
        <thead>
            <tr>
                <th style="text-align:center; padding:16px 12px;  background-color:#ff9292; color: white;">#</th>
                <th style="text-align:center; padding:16px 12px;  background-color:#ff9292;color: white;">Id pedido</th>
                <th style="text-align:center; padding:16px 12px;  background-color:#ff9292;color: white;">Fecha estimada entrega</th>
                <th style="text-align:center; padding:16px 12px;  background-color:#ff9292;color: white;">Importe total</th>
                <th style="text-align:center; padding:16px 12px;  background-color:#ff9292;color: white;">Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for order in page_obj %}
            <tr>
                <td style="text-align:center; padding:16px 12px; border-top:1px solid #c0c0c0;">
                    <a href="{% url 'order_detail' order.order_id %}" 
                       style="color:#000; text-decoration:none; display:inline-flex; align-items:center; gap:8px; transition: color 0.3s, transform 0.2s; font-size:20px;"
                       onmouseover="this.style.color='#007bff'; this.style.transform='scale(1.1)';"
                       onmouseout="this.style.color='#000'; this.style.transform='scale(1)';">
                       <i class="fa-solid fa-eye"></i> Ver
                    </a>
                </td>
                <td style="text-align:center; padding:16px 12px; border-top:1px solid #c0c0c0;">{{ order.order_id }}</td>
                <td style="text-align:center; padding:16px 12px; border-top:1px solid #c0c0c0;">{{ order.created_at|date:"d/m/Y" }}</td>
                <td style="text-align:center; padding:16px 12px; border-top:1px solid #c0c0c0;">{{ order.final_price }} €</td>
                <td style="text-align:center; padding:16px 12px; border-top:1px solid #c0c0c0;">{{ order.status|capfirst }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align:center; padding:16px 12px; border-bottom:1px solid #7a7a7a;">No hay pedidos aún.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="text-align:center; margin-top:20px; font-size:20px;">
    {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}" 
           style="margin-right:20px; color:#ff9292; text-decoration:none;"
           onmouseover="this.style.transform='scale(1.2)';" 
           onmouseout="this.style.transform='scale(1)';">
           <i class="fa-solid fa-angle-left"></i>
        </a>
    {% endif %}

    <span>Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" 
           style="margin-left:20px; color:#ff9292; text-decoration:none;"
           onmouseover="this.style.transform='scale(1.2)';" 
           onmouseout="this.style.transform='scale(1)';">
           <i class="fa-solid fa-angle-right"></i>
        </a>
    {% endif %}
    </div>
</div>

{% endblock %}
