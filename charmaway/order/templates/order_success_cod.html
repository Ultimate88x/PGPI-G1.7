{% extends 'base.html' %}
{% block title %}Order Success{% endblock %}

{% block extra_head %}
<style>
    .success-container {
        max-width: 600px;
        margin: 40px auto;
        padding: 30px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        text-align: center;
    }

    .success-icon {
        width: 80px;
        margin-bottom: 20px;
    }

    .success-title {
        font-size: 28px;
        margin-bottom: 10px;
    }

    .success-info {
        font-size: 16px;
        color: #555;
        margin-bottom: 5px;
    }

    .success-button {
        display: inline-block;
        margin-top: 25px;
        padding: 12px 25px;
        background-color: #ff6969;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-weight: bold;
        font-size: 16px;
        transition: background-color .2s ease;
    }
    .success-button:hover {
        background-color: #ff4b4b;
    }
</style>
{% endblock %}

{% block content %}
<div class="success-container">

    <svg viewBox="0 0 24 24" fill="none" width="100" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 11L12 4L21 11V20H3V11Z" stroke="#ff6969" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M9 20V15H15V20" stroke="#ff6969" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>

    <h1 class="success-title">¡Gracias por tu pedido!</h1>

    <p class="success-info">Tu pedido <strong>#{{ order.public_id }}</strong> se ha creado correctamente.</p>
    <p class="success-info"><strong>Estado:</strong> {{ order.get_status_display }}</p>
    <p class="success-info"><strong>Identificador:</strong> {{ order.public_id }}</p>
    <p class="success-info">Lo pagarás <strong>a contrareembolso</strong>.</p>

    <h2 class="success-title" style="font-size:22px; margin-top:25px;">Resumen del pedido</h2>
    <div class="order-summary" style="text-align:left; margin:20px auto; max-width:400px;">
        {% for detail in order.details.all %}
            <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f0f0f0;">
                <span>{{ detail.product.name }} (x{{ detail.quantity }})</span>
                <span>{{ detail.subtotal|floatformat:2 }} €</span>
            </div>
        {% endfor %}
        <div style="display:flex; justify-content:space-between; padding:8px 0; border-top:1px solid #ccc; margin-top:10px;">
            <strong>Gastos de envío:</strong>
            <strong>{{ order.shipping_cost|floatformat:2 }} €</strong>
        </div>
        <div style="display:flex; justify-content:space-between; padding:8px 0; border-top:1px solid #000; margin-top:5px;">
            <strong>Total:</strong>
            <strong>{{ order.final_price|floatformat:2 }} €</strong>
        </div>
    </div>

    <a href="{% url 'catalog:catalog' %}" class="success-button">Seguir comprando</a>
</div>
{% endblock %}
